{% extends 'base.html.twig' %}

{% block title %}Authentification{% endblock %}

{% block body %}
<form class="ui form" method="post">
    {% if error %}
        <div class="alert alert-danger"></div>
    {% endif %}

    {% if app.user %}
        <div class="mb-3">
            
        </div>
    {% endif %}


    {% if error %}
            {% set color = 'red'  %}

            {% set message %}
                <div class="ui icon negative message">
                    <i class="ui icon warning"></i>
                    <i class="close icon"></i>
                    <div class="content">
                        <div class="header">Login errors</div>
                        <ul class="list">
                            {{ error.messageKey|trans(error.messageData, 'security') }}
                        </ul>
                    </div>
                </div>
            {% endset %}
            
        {% else %}
            {% set color = 'green'  %} 
            {% set message = ''  %}
            {% if  app.user.username is defined %}
                
                {% set message  %}
                    {{ 'You are logged in as'|trans({},'security') }} {{ app.user.username }}, <a href="{{ path('app_logout') }}">{{ Logout|trans({},'security') }}</a>
                {% endset %}
            {% endif %}          
        {% endif %}

    {# <h1 class="h3 mb-3 font-weight-normal">Please sign in</h1>
    <label for="inputUsername">Username</label>
    <input type="text" value="{{ last_username }}" name="username" id="inputUsername" class="form-control" required autofocus>
    <label for="inputPassword">Password</label>
    <input type="password" name="password" id="inputPassword" class="form-control" required> #}

    

    <div class="ui container" style="margin-top:100px;">
            <div class="ui three column relaxed grid">
                <div class="column"></div>
                <div class="column">
                    <div class="ui segment {{ color }}">
                        <div class="ui medium header"><i class="ui icon user circle"></i>Authentification</div>

                        {{ message }}

                            <div class="field">
                                <label>Login</label>
                                <input type="text" name="username" placeholder="Username or Email" value="{{ last_username }}" required autofocus/>
                            </div>
                            <div class="field">
                                <label>Password</label>
                                <input type="password" name="password" placeholder="Account password" required/>
                            </div>
                            <input type="hidden" name="_csrf_token"
                                value="{{ csrf_token('authenticate') }}"
                            >
                            <button class="ui button primary" type="submit">
                                <i class="ui icon check"></i>
                                Connexion
                            </button>
                    </div>
                    
                </div>
                <div class="column"></div>
            </div>
            
        </div>

    {#
        Uncomment this section and add a remember_me option below your firewall to activate remember me functionality.
        See https://symfony.com/doc/current/security/remember_me.html

        <div class="checkbox mb-3">
            <label>
                <input type="checkbox" name="_remember_me"> Remember me
            </label>
        </div>
    #}
{# 
    <button class="btn btn-lg btn-primary" type="submit">
        Sign in
    </button> #}
</form>
{% endblock %}
